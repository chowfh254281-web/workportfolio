<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sam Chow | Graphic</title>
    <style>
        /* --- PERFORMANCE & RESET --- */
        * { box-sizing: border-box; }
        body { text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased; margin: 0; padding: 0; color: #fff; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: #050505; background-image: radial-gradient(circle at 50% 30%, #1a1a1a 0%, #000000 70%); min-height: 100vh; overflow-x: hidden; }
        
        html.lenis, html.lenis body { height: auto; }
        .lenis.lenis-smooth { scroll-behavior: auto !important; }
        .lenis.lenis-smooth [data-lenis-prevent] { overscroll-behavior: contain; }
        .lenis.lenis-stopped { overflow: hidden; }

        .noise-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; mix-blend-mode: overlay; opacity: 0.06; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E"); }
        
        /* Navbar */
        .smart-nav { position: fixed; top: 30px; left: 50%; transform: translateX(-50%); height: 60px; padding: 0 30px; display: flex; justify-content: space-between; align-items: center; z-index: 2000; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 50px; border: 1px solid rgba(255,255,255,0.1); width: auto; min-width: 450px; transition: all 0.5s cubic-bezier(0.22, 1, 0.36, 1); }
        .nav-logo { font-weight: 900; letter-spacing: -1px; font-size: 18px; text-decoration: none; color: #fff; white-space: nowrap; margin-right: 30px; }
        .nav-links { display: flex; gap: 25px; align-items: center; overflow: hidden; transition: all 0.5s ease; opacity: 1; max-width: 900px; }
        .nav-item { text-decoration: none; color: #ccc; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; transition: color 0.3s ease; white-space: nowrap; position: relative; }
        .nav-item:hover, .nav-item.active { color: #F4D03F; }
        .menu-icon { width: 24px; height: 24px; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 5px; cursor: pointer; margin-left: 40px; }
        .menu-line { width: 100%; height: 1px; background-color: #fff; transition: width 0.3s ease; }
        .smart-nav.collapsed { min-width: 150px; background: rgba(255, 255, 255, 0.05); padding: 0 20px; } 
        .smart-nav.collapsed .nav-links { max-width: 0; opacity: 0; gap: 0; pointer-events: none; } 
        .smart-nav.collapsed .nav-logo { margin-right: 10px; } 
        .smart-nav.collapsed .menu-icon { margin-left: 0; }
        .smart-nav:hover, .smart-nav.force-expand { min-width: 500px !important; background: rgba(255, 255, 255, 0.1) !important; padding: 0 30px !important; } 
        .smart-nav:hover .nav-links, .smart-nav.force-expand .nav-links { max-width: 900px !important; opacity: 1 !important; gap: 25px !important; pointer-events: auto !important; display: flex !important; } 
        .smart-nav:hover .nav-logo, .smart-nav.force-expand .nav-logo { margin-right: 30px !important; } 
        .smart-nav:hover .menu-icon, .smart-nav.force-expand .menu-icon { margin-left: 40px !important; }

        .mobile-menu-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background-color: #000; z-index: 1500; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 30px; opacity: 0; pointer-events: none; transition: opacity 0.4s ease; } .mobile-menu-overlay.active { opacity: 1; pointer-events: auto; }
        .mobile-link { font-size: 30px; font-weight: 700; color: #888; text-decoration: none; text-transform: uppercase; letter-spacing: 2px; transform: translateY(20px); opacity: 0; transition: all 0.4s ease; } .mobile-link:hover { color: #fff; } .mobile-menu-overlay.active .mobile-link { transform: translateY(0); opacity: 1; }
        @media (max-width: 768px) { .nav-links { display: none !important; } .smart-nav { min-width: 0 !important; width: 90% !important; max-width: 350px; top: 20px; padding: 0 20px !important; } }
        
        /* Header */
        .header-section { padding: 220px 40px 100px 40px; text-align: center; position: relative; z-index: 10; }
        h1.page-title { font-size: 80px; font-weight: 900; margin: 0; line-height: 1; letter-spacing: -2px; opacity: 0; animation: fadeInUp 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards; animation-delay: 0.2s; color: #fff; }
        .page-desc { margin-top: 20px; font-size: 16px; color: #888; max-width: 600px; display: inline-block; opacity: 0; animation: fadeInUp 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards; animation-delay: 0.4s; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Kinetic Gallery */
        .kinetic-wrapper { 
            position: relative; width: 100%; overflow: hidden; padding-bottom: 200px; 
            display: flex; flex-direction: column; 
            gap: 15px; /* Tighter Spacing */
        }

        .mobile-track { display: contents; }
        
        /* Using translate3d for GPU */
        .gallery-strip { 
            display: flex; 
            gap: 15px; /* Tighter Spacing */
            width: max-content; 
            transform: translate3d(0, 0, 0); 
            will-change: transform; 
            backface-visibility: hidden; 
            perspective: 1000px;
        }
        
        /* --- RESTORED LOGIC: Fixed Height + Auto Width --- */
        .strip-item { 
            flex-shrink: 0; 
            
            /* Allow auto width based on image ratio */
            width: auto; 
            
            /* Fixed height for uniformity */
            height: 32vw; 
            min-height: 320px; 
            max-height: 640px;
            
            /* Removed aspect-ratio to prevent layout forcing */
            
            position: relative; border-radius: 12px; overflow: hidden; background-color: #111; 
            transform: translateZ(0);
        }
        
        .strip-item img { 
            width: auto; 
            height: 100%; 
            
            /* Ensure full image is visible, fill height */
            object-fit: contain; 
            
            /* Brighter default */
            filter: brightness(0.9); 
            transition: filter 0.3s ease, transform 0.3s ease; 
            will-change: transform, filter; transform: translateZ(0); 
        }
        
        .strip-item:hover img { 
            filter: brightness(1.1) !important; 
            transform: scale(1.05); 
        }
        
        .strip-caption { position: absolute; bottom: 20px; left: 20px; font-size: 3vw; font-weight: 700; color: transparent; -webkit-text-stroke: 1px rgba(255,255,255,0.5); z-index: 2; pointer-events: none; }
        
        @media (max-width: 768px) {
            .header-section { padding-bottom: 50px; }
            .kinetic-wrapper { gap: 20px; padding: 0 20px 100px 20px; display: block; }
            .mobile-track { display: block; margin-bottom: 30px; }
            .gallery-strip { display: flex; flex-direction: column; gap: 30px; width: 100%; transform: none !important; overflow: visible; }
            
            .strip-item { 
                width: 100%; height: auto; max-width: none; 
                filter: brightness(0.9); 
            }
            .strip-item img { width: 100%; height: auto; filter: inherit; object-fit: cover; }
            .strip-item.in-view { filter: brightness(1); }
            .strip-item.duplicate { display: none; }
            .strip-caption { font-size: 40px; }
        }

        /* --- UPDATED CONTACT WIDGET --- */
        .contact-widget { position: fixed; bottom: 30px; right: 30px; z-index: 2500; display: flex; align-items: center; background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.15); border-radius: 50px; padding: 6px; width: auto; max-width: 52px; height: 52px; box-sizing: border-box; overflow: hidden; transition: max-width 0.6s cubic-bezier(0.22, 1, 0.36, 1), background 0.3s ease, box-shadow 0.3s ease, padding-right 0.6s ease; }
        .contact-widget:hover, .contact-widget.expanded { max-width: 380px; padding-right: 25px; background: rgba(255, 255, 255, 0.15); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .contact-widget:hover .contact-details, .contact-widget.expanded .contact-details { opacity: 1; margin-left: 15px; pointer-events: auto; }
        .contact-icon { width: 38px; height: 38px; background: #fff; color: #000; border-radius: 50%; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
        .contact-details { opacity: 0; white-space: nowrap; margin-left: 0; display: flex; flex-direction: column; justify-content: center; gap: 4px; pointer-events: none; transition: opacity 0.3s ease 0.1s, margin-left 0.4s ease; }
        .contact-link { color: #ccc; text-decoration: none; font-size: 13px; font-weight: 500; letter-spacing: 1px; display: flex; align-items: center; transition: color 0.3s; }
        .contact-link:hover { color: #fff; }
        .contact-link span.label { font-size: 9px; text-transform: uppercase; color: #666; margin-right: 10px; width: 60px; font-weight: 700; }
    </style>
</head>
<body>
    <div class="noise-overlay"></div>
    
    <nav class="smart-nav" id="navbar">
        <a href="index.html" class="nav-logo">SAM CHOW.</a>
        <div class="nav-links">
            <a href="uiux.html" class="nav-item">UI/UX</a>
            <a href="graphic.html" class="nav-item active">Graphic</a>
            <a href="3d.html" class="nav-item">3D</a>
            <a href="photography.html" class="nav-item">Photography</a>
            <a href="video.html" class="nav-item">Video</a>
            <a href="ai.html" class="nav-item">AI Generative</a>
        </div>
        <div class="menu-icon" id="menu-btn"><div class="menu-line"></div><div class="menu-line"></div><div class="menu-line"></div></div>
    </nav>
    <div class="mobile-menu-overlay" id="mobile-menu">
        <a href="uiux.html" class="mobile-link">UI/UX</a>
        <a href="graphic.html" class="mobile-link">Graphic</a>
        <a href="3d.html" class="mobile-link">3D</a>
        <a href="photography.html" class="mobile-link">Photography</a>
        <a href="video.html" class="mobile-link">Video</a>
        <a href="ai.html" class="mobile-link">AI Generative</a>
    </div>

    <div class="header-section">
        <h1 class="page-title">Graphic</h1>
        <div class="page-desc">Visual identity, branding, and creative composition.</div>
    </div>

    <div class="kinetic-wrapper">
        <div class="mobile-track">
            <div class="gallery-strip" id="row-1">
                <div class="strip-item"><img src="images/Graphic_optimized/02.jpg"><div class="strip-caption">01</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/24.jpg"><div class="strip-caption">02</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/300x600_1.jpg"><div class="strip-caption">03</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/0320_b.jpg"><div class="strip-caption">04</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/0414_v1.jpg"><div class="strip-caption">05</div></div>
                
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/02.jpg"><div class="strip-caption">01</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/24.jpg"><div class="strip-caption">02</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/300x600_1.jpg"><div class="strip-caption">03</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/0320_b.jpg"><div class="strip-caption">04</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/0414_v1.jpg"><div class="strip-caption">05</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/02.jpg"><div class="strip-caption">01</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/24.jpg"><div class="strip-caption">02</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/300x600_1.jpg"><div class="strip-caption">03</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/0320_b.jpg"><div class="strip-caption">04</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/0414_v1.jpg"><div class="strip-caption">05</div></div>
            </div>
        </div>

        <div class="mobile-track">
            <div class="gallery-strip" id="row-2">
                <div class="strip-item"><img src="images/Graphic_optimized/0529_challenge_1-1_1b_2-1.jpg"><div class="strip-caption">06</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/967_1-1.jpg"><div class="strip-caption">07</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/122414.jpg"><div class="strip-caption">08</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/123214.jpg"><div class="strip-caption">09</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/HSBC Life x HKFC sponsorship video thumbnail_1.jpg"><div class="strip-caption">10</div></div>

                <div class="strip-item duplicate"><img src="images/Graphic_optimized/0529_challenge_1-1_1b_2-1.jpg"><div class="strip-caption">06</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/967_1-1.jpg"><div class="strip-caption">07</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/122414.jpg"><div class="strip-caption">08</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/123214.jpg"><div class="strip-caption">09</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/HSBC Life x HKFC sponsorship video thumbnail_1.jpg"><div class="strip-caption">10</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/0529_challenge_1-1_1b_2-1.jpg"><div class="strip-caption">06</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/967_1-1.jpg"><div class="strip-caption">07</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/122414.jpg"><div class="strip-caption">08</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/123214.jpg"><div class="strip-caption">09</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/HSBC Life x HKFC sponsorship video thumbnail_1.jpg"><div class="strip-caption">10</div></div>
            </div>
        </div>

        <div class="mobile-track">
            <div class="gallery-strip" id="row-3">
                <div class="strip-item"><img src="images/Graphic_optimized/INGREDIENTS_4-5.jpg"><div class="strip-caption">11</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/june6_2.jpg"><div class="strip-caption">12</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/meadjohnson_socialmedia_01.jpg"><div class="strip-caption">13</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/meadjohnson_socialmedia_02.jpg"><div class="strip-caption">14</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/meadjohnson_socialmedia_03.jpg"><div class="strip-caption">15</div></div>

                <div class="strip-item duplicate"><img src="images/Graphic_optimized/INGREDIENTS_4-5.jpg"><div class="strip-caption">11</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/june6_2.jpg"><div class="strip-caption">12</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_01.jpg"><div class="strip-caption">13</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_02.jpg"><div class="strip-caption">14</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_03.jpg"><div class="strip-caption">15</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/INGREDIENTS_4-5.jpg"><div class="strip-caption">11</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/june6_2.jpg"><div class="strip-caption">12</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_01.jpg"><div class="strip-caption">13</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_02.jpg"><div class="strip-caption">14</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_03.jpg"><div class="strip-caption">15</div></div>
            </div>
        </div>

        <div class="mobile-track">
            <div class="gallery-strip" id="row-4">
                <div class="strip-item"><img src="images/Graphic_optimized/meadjohnson_socialmedia_04.jpg"><div class="strip-caption">16</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/meadjohnson_socialmedia_05.jpg"><div class="strip-caption">17</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/meadjohnson_socialmedia_06.jpg"><div class="strip-caption">18</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/p1.jpg"><div class="strip-caption">19</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/p3_6.jpg"><div class="strip-caption">20</div></div>

                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_04.jpg"><div class="strip-caption">16</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_05.jpg"><div class="strip-caption">17</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_06.jpg"><div class="strip-caption">18</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/p1.jpg"><div class="strip-caption">19</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/p3_6.jpg"><div class="strip-caption">20</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_04.jpg"><div class="strip-caption">16</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_05.jpg"><div class="strip-caption">17</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/meadjohnson_socialmedia_06.jpg"><div class="strip-caption">18</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/p1.jpg"><div class="strip-caption">19</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/p3_6.jpg"><div class="strip-caption">20</div></div>
            </div>
        </div>

        <div class="mobile-track">
            <div class="gallery-strip" id="row-5">
                <div class="strip-item"><img src="images/Graphic_optimized/p3b_3.jpg"><div class="strip-caption">21</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/post-4-5_V5a.jpg"><div class="strip-caption">22</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/scene1.jpg"><div class="strip-caption">23</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/scene2.jpg"><div class="strip-caption">24</div></div>
                <div class="strip-item"><img src="images/Graphic_optimized/0414_v2c.jpg"><div class="strip-caption">25</div></div>

                <div class="strip-item duplicate"><img src="images/Graphic_optimized/p3b_3.jpg"><div class="strip-caption">21</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/post-4-5_V5a.jpg"><div class="strip-caption">22</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/scene1.jpg"><div class="strip-caption">23</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/scene2.jpg"><div class="strip-caption">24</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/0414_v2c.jpg"><div class="strip-caption">25</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/p3b_3.jpg"><div class="strip-caption">21</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/post-4-5_V5a.jpg"><div class="strip-caption">22</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/scene1.jpg"><div class="strip-caption">23</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/scene2.jpg"><div class="strip-caption">24</div></div>
                <div class="strip-item duplicate"><img src="images/Graphic_optimized/0414_v2c.jpg"><div class="strip-caption">25</div></div>
            </div>
        </div>
    </div>

    <div class="contact-widget" id="contact-bubble">
        <div class="contact-icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg></div>
        <div class="contact-details">
            <a href="https://wa.me/85267012420" target="_blank" class="contact-link" style="color: #fff;"><span class="label">WA</span>+852 6701 2420</a>
            <a href="mailto:chowfh254281@gmail.com" class="contact-link" style="color: #fff;"><span class="label">MAIL</span>chowfh254281@gmail.com</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>
    <script>
        const navbar = document.getElementById('navbar');
        const menuBtn = document.getElementById('menu-btn'); 
        const mobileMenu = document.getElementById('mobile-menu');

        // Navbar Logic
        menuBtn.addEventListener('click', () => { 
            if (window.innerWidth > 768) { navbar.classList.toggle('force-expand'); } 
            else { mobileMenu.classList.toggle('active'); menuBtn.classList.toggle('open'); }
        });
        window.addEventListener('scroll', () => { 
            if (window.scrollY > 50) navbar.classList.add('collapsed'); 
            else { navbar.classList.remove('collapsed'); navbar.classList.remove('force-expand'); }
        });

        const lenis = new Lenis({ 
            duration: 1.2, easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)), 
            smooth: true, smoothTouch: true, touchMultiplier: 1.5 
        });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // Get Rows (5 rows)
        const rows = [
            document.getElementById('row-1'), document.getElementById('row-2'),
            document.getElementById('row-3'), document.getElementById('row-4'),
            document.getElementById('row-5')
        ];

        if (window.innerWidth > 768) { initDesktopAnimation(); } else { initMobileVerticalLogic(); }

        function initDesktopAnimation() {
            let baseSpeed = 0.5; let scrollVelocity = 0; let skewStrength = 0;
            let singleSetWidth = 0;
            
            // Positions
            let pos1 = 0, pos3 = 0, pos5 = 0; // Left moving
            let pos2 = 0, pos4 = 0; // Right moving
            
            let lastScrollY = window.scrollY; 

            function calculateWidth() { 
                if(rows[0]) {
                    // METHOD: Sum widths of first 5 items (One Set) + 5 gaps
                    // NOW WE USE PREDICTABLE CSS SIZING SO WE CAN MEASURE JUST ONE SET
                    const items = rows[0].querySelectorAll('.strip-item');
                    let totalItemWidth = 0;
                    
                    // Sum the first 5 unique items
                    for(let i=0; i<5; i++) {
                        if(items[i]) totalItemWidth += items[i].getBoundingClientRect().width;
                    }
                    
                    const style = window.getComputedStyle(rows[0]);
                    const gap = parseFloat(style.gap) || 15;
                    
                    // Total width of one "set"
                    singleSetWidth = totalItemWidth + (gap * 5);
                    
                    // Reset Right Moving Rows offset
                    if(pos2 === 0) {
                        pos2 = -singleSetWidth; 
                        pos4 = -singleSetWidth; 
                    }
                }
            }
            
            // 1. Initial Calc
            calculateWidth();
            
            // 2. Resize Listener
            window.addEventListener('resize', calculateWidth);
            
            // 3. Image Load Listener (Ensures accurate width after image load)
            window.addEventListener('load', calculateWidth);

            function animate() {
                const currentScrollY = window.scrollY; 
                const delta = currentScrollY - lastScrollY; 
                lastScrollY = currentScrollY;
                
                // Smoothed Velocity
                scrollVelocity += (delta * 0.1 - scrollVelocity) * 0.1;
                
                const speed = baseSpeed + (scrollVelocity * 5); 
                const limit = singleSetWidth || 3000;
                
                // Skew
                skewStrength += ((scrollVelocity * 2) - skewStrength) * 0.1;
                const safeSkew = Math.max(Math.min(skewStrength, 5), -5);

                // --- LEFT MOVING (Rows 1, 3, 5) ---
                pos1 -= speed; if (pos1 <= -limit) pos1 += limit; if (pos1 > 0) pos1 -= limit;
                pos3 -= speed; if (pos3 <= -limit) pos3 += limit; if (pos3 > 0) pos3 -= limit;
                pos5 -= speed; if (pos5 <= -limit) pos5 += limit; if (pos5 > 0) pos5 -= limit;

                // --- RIGHT MOVING (Rows 2, 4) ---
                pos2 += speed; if (pos2 >= 0) pos2 -= limit; if (pos2 < -limit) pos2 += limit;
                pos4 += speed; if (pos4 >= 0) pos4 -= limit; if (pos4 < -limit) pos4 += limit;

                // Apply transforms using toFixed(2) for sub-pixel smoothness
                if(rows[0]) rows[0].style.transform = `translate3d(${pos1.toFixed(2)}px, 0, 0) skewX(${safeSkew.toFixed(2)}deg)`;
                if(rows[1]) rows[1].style.transform = `translate3d(${pos2.toFixed(2)}px, 0, 0) skewX(${safeSkew.toFixed(2)}deg)`;
                if(rows[2]) rows[2].style.transform = `translate3d(${pos3.toFixed(2)}px, 0, 0) skewX(${safeSkew.toFixed(2)}deg)`;
                if(rows[3]) rows[3].style.transform = `translate3d(${pos4.toFixed(2)}px, 0, 0) skewX(${safeSkew.toFixed(2)}deg)`;
                if(rows[4]) rows[4].style.transform = `translate3d(${pos5.toFixed(2)}px, 0, 0) skewX(${safeSkew.toFixed(2)}deg)`;
                
                // Brightness Effect based on velocity
                const bright = 0.9 + (Math.abs(scrollVelocity) * 0.2); 
                
                requestAnimationFrame(animate);
            }
            animate();
        }

        function initMobileVerticalLogic() {
            const observerOptions = { root: null, rootMargin: '-40% 0px -40% 0px', threshold: 0 };
            const observer = new IntersectionObserver((entries) => { 
                entries.forEach(entry => { 
                    if (entry.isIntersecting) { entry.target.classList.add('in-view'); } 
                    else { entry.target.classList.remove('in-view'); } 
                }); 
            }, observerOptions);
            document.querySelectorAll('.strip-item').forEach(item => { observer.observe(item); });
        }
    </script>
</body>
</html>